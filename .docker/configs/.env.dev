# ========================================
# SOP LLM Service - Development Environment
# ========================================
# Для deployment в dev окружении

# ========================================
# Application Settings
# ========================================
SOP__APP_NAME=SOP LLM Service
SOP__ENVIRONMENT=dev
SOP__DEBUG=false

# ========================================
# Server Settings
# ========================================
SOP__SERVER__HOST=0.0.0.0
SOP__SERVER__PORT=8023
SOP__SERVER__WORKERS=2
SOP__SERVER__TIMEOUT=120
SOP__SERVER__RELOAD=false

# API Port (внутренний порт контейнера)
API_PORT=8000

# ========================================
# Redis Settings
# ========================================
SOP__REDIS__HOST=redis
SOP__REDIS__PORT=6379
SOP__REDIS__DB=0
SOP__REDIS__PASSWORD=
SOP__REDIS__POOL_MIN=5
SOP__REDIS__POOL_MAX=100

# ========================================
# Cache Settings
# ========================================
SOP__CACHE__ENABLED=true
SOP__CACHE__TTL=1800
SOP__CACHE__PREFIX=sop_llm:dev:

# ========================================
# LLM Settings
# ========================================
SOP__LLM__MODELS_CACHE_DIR=/root/.cache/huggingface/hub
SOP__LLM__DEFAULT_MODEL=Qwen/Qwen2.5-3B-Instruct
SOP__LLM__DEFAULT_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
SOP__LLM__MAX_CONCURRENT_REQUESTS=5
SOP__LLM__MAX_TOKENS_PER_REQUEST=4096
SOP__LLM__REQUEST_TIMEOUT=120
SOP__LLM__MEMORY_THRESHOLD_PERCENT=85.0

# ========================================
# JSON Fixer Settings
# ========================================
SOP__JSON_FIXER__ENABLED=true
SOP__JSON_FIXER__MODEL=Qwen/Qwen2.5-7B-Instruct
SOP__JSON_FIXER__LOAD_IN_8BIT=true
SOP__JSON_FIXER__TIMEOUT=60
SOP__JSON_FIXER__MAX_ATTEMPTS=3

# ========================================
# Claude API Settings
# ========================================
SOP__CLAUDE__API_KEY=${CLAUDE_API_KEY}
SOP__CLAUDE__MODEL=claude-3-haiku-20240307
SOP__CLAUDE__MAX_CONCURRENT_REQUESTS=10

# ========================================
# Queue Settings
# ========================================
SOP__QUEUE__NAME=sop_llm_tasks_dev
SOP__QUEUE__MAX_RETRIES=3
SOP__QUEUE__RETRY_DELAY=5

# ========================================
# Logging Settings
# ========================================
SOP__LOG__LEVEL=INFO
SOP__LOG__FORMAT=json
SOP__LOG__FILE_PATH=logs/sop-llm.log
SOP__LOG__ROTATION=50 MB
SOP__LOG__RETENTION=30 days

# ========================================
# Docker Settings
# ========================================
APP_PORT=8001
REDIS_PORT=6379
METRICS_PORT=9090

# GPU Support
INSTALL_GPU=true
CUDA_VERSION=12.1.0
DEVICE=cuda

# HuggingFace
HUGGINGFACE_TOKEN=${HUGGINGFACE_TOKEN}

# External API Keys
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
OPENAI_API_KEY=${OPENAI_API_KEY}

# Performance
WORKERS=2
THREADS=8
TORCH_NUM_THREADS=8
OMP_NUM_THREADS=8

# GPU Configuration
NVIDIA_VISIBLE_DEVICES=all
NVIDIA_DRIVER_CAPABILITIES=compute,utility
