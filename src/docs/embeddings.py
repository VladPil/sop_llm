"""Documentation strings для Embeddings API."""

GENERATE_EMBEDDINGS = """
Генерирует векторные представления (embeddings) для списка текстов.

## Что такое embeddings

Embeddings — это числовые векторы, представляющие семантическое значение текста.
Тексты с похожим смыслом имеют близкие векторы в многомерном пространстве.

## Применение

- **Семантический поиск** — поиск документов по смыслу, а не по ключевым словам
- **RAG** — Retrieval-Augmented Generation для LLM
- **Кластеризация** — группировка похожих текстов
- **Дедупликация** — обнаружение дубликатов контента
- **Рекомендации** — поиск похожих товаров/статей

## Доступные модели

| Модель | Dimensions | Языки | Описание |
|--------|------------|-------|----------|
| `multilingual-e5-large` | 1024 | 100+ | Лучшее качество, мультиязычная |
| `all-MiniLM-L6-v2` | 384 | EN | Быстрая, компактная |

## Параметры запроса

| Параметр | Тип | Описание |
|----------|-----|----------|
| `texts` | list[str] | Список текстов для векторизации (макс. 100) |
| `model_name` | string | Имя зарегистрированной embedding модели |

## Формат ответа

| Поле | Описание |
|------|----------|
| `embeddings` | Список векторов (по одному на текст) |
| `model` | Использованная модель |
| `dimensions` | Размерность вектора |

## Рекомендации

- **Нормализация** — удаляйте лишние пробелы и переносы строк
- **Батчинг** — отправляйте тексты группами по 32-64 штуки
- **Кэширование** — сохраняйте embeddings в БД, не генерируйте повторно
- **E5 модели** — добавляйте префикс "query: " или "passage: "

## Ошибки

| Код | Описание |
|-----|----------|
| 400 | Невалидный запрос (пустой список, слишком много текстов) |
| 404 | Embedding модель не зарегистрирована |
| 500 | Ошибка генерации (проблемы с моделью или GPU) |

## Регистрация embedding модели

Перед использованием модель должна быть зарегистрирована через:
- `/models/register-from-preset` — из готового пресета
- `/models/register` — вручную с указанием конфигурации
"""

CALCULATE_SIMILARITY = """
Вычисляет косинусное сходство между двумя текстами используя embeddings.

## Как это работает

1. Генерируются embeddings для обоих текстов
2. Вычисляется косинусное сходство между векторами
3. Результат нормализуется в диапазон [0.0, 1.0]

## Интерпретация результата

| Similarity | Интерпретация |
|------------|---------------|
| 0.9 - 1.0 | Очень похожие тексты |
| 0.7 - 0.9 | Похожие тексты |
| 0.5 - 0.7 | Некоторое сходство |
| 0.0 - 0.5 | Мало общего |

## Применение

- Поиск дубликатов
- Сравнение документов
- Проверка плагиата
- Группировка похожих текстов

## Пример

```json
{
    "text1": "Машинное обучение - это область искусственного интеллекта",
    "text2": "ML является частью AI",
    "model_name": "multilingual-e5-large"
}
```

Ответ:
```json
{
    "similarity": 0.85,
    "model": "multilingual-e5-large",
    "text1_preview": "Машинное обучение - это область искусственного интеллекта",
    "text2_preview": "ML является частью AI"
}
```
"""
